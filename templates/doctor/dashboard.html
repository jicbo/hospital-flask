<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Doctor Dashboard</title>
	</head>
	<body>
		{% extends 'base.html' %} {% block content %}
		<h1>Doctor Dashboard</h1>
		<p>Welcome, Dr. {{ current_user.name }}!</p>

		<h2>Upcoming Appointments</h2>
		{% if upcoming_appointments %}
		<table class="table">
			<thead>
				<tr>
					<th>Patient ID</th>
					<th>Patient Name</th>
					<th>Date</th>
					<th>Time</th>
					<th>Notes</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				{% for appointment in upcoming_appointments %}
				<tr>
					<td>{{ appointment.patient_id }}</td>
					<td>{{ appointment.patient.name }}</td>
					<td>{{ appointment.appointment_date }}</td>
					<td>
						{{ appointment.appointment_time.strftime('%H:%M') }}
					</td>
					<td>{{ appointment.notes }}</td>
					<td>
						<a
							href="{{ url_for('doctor.add_report', appointment_id=appointment.id) }}"
							class="btn btn-primary btn-sm"
							>Add Report</a
						>
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
		{% else %}
		<p>No upcoming appointments scheduled.</p>
		{% endif %}

		<h2>Past Appointments</h2>
		{% if past_appointments %}
		<table class="table">
			<thead>
				<tr>
					<th>Patient ID</th>
					<th>Patient Name</th>
					<th>Date</th>
					<th>Time</th>
					<th>Notes</th>
				</tr>
			</thead>
			<tbody>
				{% for appointment in past_appointments %}
				<tr>
					<td>{{ appointment.patient_id }}</td>
					<td>{{ appointment.patient.name }}</td>
					<td>{{ appointment.appointment_date }}</td>
					<td>
						{{ appointment.appointment_time.strftime('%H:%M') }}
					</td>
					<td>{{ appointment.notes }}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
		{% else %}
		<p>No past appointments.</p>
		{% endif %}

		<a
			href="{{ url_for('doctor.issue_prescription') }}"
			class="btn btn-primary"
			>Issue Prescription</a
		>
		{% endblock %}
	</body>
</html>
